<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        text-align: center;
        margin: 0;
        padding: 20px;
        background-color: aliceblue;
      }
      @media (pointer: none) {
        .css .input-type span {
          display: none;
        }
        .css .input-type:after {
          content: "None";
        }
      }
      @media (pointer: coarse) {
        .css .input-type span {
          display: none;
        }
        .css .input-type:after {
          content: "Coarse (touch)";
        }
      }
      @media (pointer: fine) {
        .css .input-type span {
          display: none;
        }
        .css .input-type:after {
          content: "Fine (mouse)";
        }
      }
    </style>
  </head>
  <body>
    <h1>Input device detection</h1>

    <section class="userAgent">
      <p>
        User Agent:
        <span id="userAgent">
          checking…
        </span>
      </p>
    </section>

    <section class="css">
      <h2>
        CSS:
        <span class="input-type">
          <span>
            checking…
          </span>
        </span>
      </h2>
    </section>

    <section class="js">
      <h2>
        JS - detect input:
        <span id="input-type">
          checking…
        </span>
      </h2>
    </section>

    <section class="listen">
      <h2>
        JS - listen to input:
        <span id="input-type-listen">
          checking…
        </span>
      </h2>
    </section>

    <script>
      document.getElementById("userAgent").innerHTML = navigator.userAgent;

      //////////////////////////////////////////////////////////////////////////
      const placeholderCss = document.getElementById("input-type");
      if (
        "ontouchstart" in window || // html5 browsers
        navigator.maxTouchPoints > 0 || // future IE
        navigator.msMaxTouchPoints > 0 // current IE10
      ) {
        placeholderCss.innerHTML = "Coarse (touch)";
      } else {
        placeholderCss.innerHTML = "No touch detected";
      }

      function debounce(func, wait, immediate) {
        let timeout;
        return function() {
          const context = this;
          const args = arguments;
          const later = function() {
            timeout = null;
            if (!immediate) func.apply(context, args);
          };
          const callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
          if (callNow) {
            func.apply(context, args);
          }
        };
      }
      const listenForResize = debounce(function() {
        location.reload();
      }, 250);

      window.addEventListener("resize", listenForResize);

      //////////////////////////////////////////////////////////////////////////
      const placeholderListen = document.getElementById("input-type-listen");

      function listenForInput() {
        // Touch
        window.addEventListener(
          "touchstart",
          function onFirstTouch() {
            placeholderListen.innerHTML = "Coarse (touch)";

            // window.removeEventListener("touchstart", onFirstTouch, false);
          },
          false
        );

        // Pointer
        window.addEventListener(
          "mouseover",
          function onFirstHover() {
            placeholderListen.innerHTML = "Fine (mouse)";
            // window.removeEventListener("mouseover", onFirstHover, false);
          },
          false
        );
      }
      listenForInput();
    </script>
  </body>
</html>
