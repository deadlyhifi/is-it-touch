<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        font-family: monospace;
        text-align: center;
        margin: 0;
        padding: 20px;
        height: calc(100vh - 40px);
        background-color: aliceblue;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      @media (pointer: none) {
        .css .input-type span {
          display: none;
        }
        .css .input-type:after {
          content: "None";
        }
      }
      @media (pointer: coarse) {
        .css .input-type span {
          display: none;
        }
        .css .input-type:after {
          content: "Coarse (touch)";
        }
      }
      @media (pointer: fine) {
        .css .input-type span {
          display: none;
        }
        .css .input-type:after {
          content: "Fine (mouse)";
        }
      }
    </style>
  </head>
  <body>
    <h1>Input device detection</h1>

    <section class="userAgent">
      <p>
        User Agent:
        <span id="userAgent">
          checking…
        </span>
      </p>
    </section>

    <section class="css">
      <h2>
        CSS:
        <span class="input-type">
          <span>
            checking…
          </span>
        </span>
      </h2>
    </section>

    <section class="js">
      <h2>
        JS – "ontouchstart":
        <span id="input-detect">
          checking…
        </span>
      </h2>
    </section>

    <section class="listen">
      <h2>
        JS – listen:
        <span id="input-listen">
          checking…
        </span>
      </h2>
    </section>
    
    <section>
      <h2>How does this work?</h2>
      <p><strong>CSS</strong>: this checks via @media pointer: coarse/fine.</p>
      <p><strong>JS – "ontouchstart"</strong>: checks for "ontouchstart" in window, detecting that touch is an available input method.</p>
      <p><strong>JS – listen</strong>: updates based on the last input method ("touchstart" or "mouseover").</p>
    </section>

    <script>
      document.getElementById("userAgent").innerHTML = navigator.userAgent;

      //////////////////////////////////////////////////////////////////////////
      const placeholderCss = document.getElementById("input-detect");
      if (
        "ontouchstart" in window || // html5 browsers
        navigator.maxTouchPoints > 0 || // future IE
        navigator.msMaxTouchPoints > 0 // current IE10
      ) {
        placeholderCss.innerHTML = "Coarse (touch)";
      } else {
        placeholderCss.innerHTML = "No touch detected";
      }

      const placeholderListen = document.getElementById("input-listen");

      function listenForInput() {
        // Touch
        window.addEventListener(
          "touchstart",
          function onFirstTouch() {
            placeholderListen.innerHTML = "Coarse (touch)";

            // window.removeEventListener("touchstart", onFirstTouch, false);
          },
          false
        );

        // Pointer
        window.addEventListener(
          "mouseover",
          function onFirstHover() {
            placeholderListen.innerHTML = "Fine (mouse)";

            // window.removeEventListener("mouseover", onFirstHover, false);
          },
          false
        );
      }
      listenForInput();
    </script>
  </body>
</html>
